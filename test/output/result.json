{
  "type": "code",
  "elements": [
    {
      "type": "class_definition",
      "name": "Table",
      "parent": "",
      "block": {
        "type": "class_block",
        "elements": [
          {
            "type": "property",
            "variable": {
              "type": "variable",
              "name": "name",
              "children": "",
              "index": ""
            }
          },
          {
            "type": "property",
            "variable": {
              "type": "variable",
              "name": "properties",
              "children": "",
              "index": ""
            },
            "value": [
              {
                "type": "expression",
                "contents": {
                  "type": "create_array",
                  "arguments": {
                    "type": "arguments",
                    "expressions": [
                      ""
                    ]
                  }
                }
              }
            ]
          },
          {
            "type": "property",
            "variable": {
              "type": "variable",
              "name": "ground",
              "children": "",
              "index": ""
            }
          },
          {
            "type": "property",
            "variable": {
              "type": "variable",
              "name": "db_name",
              "children": "",
              "index": ""
            }
          },
          {
            "type": "property",
            "variable": {
              "type": "variable",
              "name": "query",
              "children": "",
              "index": ""
            }
          },
          {
            "type": "comment",
            "text": " Array: An override for Vineyard's single key design.  $primary_keys",
            "multiline": 0
          },
          {
            "type": "comment",
            "text": " mostly just effects table creation.",
            "multiline": 0
          },
          {
            "type": "property",
            "variable": {
              "type": "variable",
              "name": "primary_keys",
              "children": "",
              "index": ""
            },
            "value": [
              {
                "type": "expression",
                "contents": "null"
              }
            ]
          },
          {
            "type": "property",
            "variable": {
              "type": "variable",
              "name": "types",
              "children": "",
              "index": ""
            },
            "value": [
              {
                "type": "expression",
                "contents": {
                  "type": "associative_array_definition",
                  "items": [
                    {
                      "type": "key_value",
                      "key": {
                        "type": "expression",
                        "contents": {
                          "type": "literal_string",
                          "text": "CHAR",
                          "quotes": "single"
                        }
                      },
                      "value": {
                        "type": "expression",
                        "contents": {
                          "type": "literal_string",
                          "text": "string",
                          "quotes": "single"
                        }
                      }
                    },
                    {
                      "type": "key_value",
                      "key": {
                        "type": "expression",
                        "contents": {
                          "type": "literal_string",
                          "text": "DECIMAL",
                          "quotes": "single"
                        }
                      },
                      "value": {
                        "type": "expression",
                        "contents": {
                          "type": "literal_string",
                          "text": "decimal",
                          "quotes": "single"
                        }
                      }
                    },
                    {
                      "type": "key_value",
                      "key": {
                        "type": "expression",
                        "contents": {
                          "type": "literal_string",
                          "text": "INT",
                          "quotes": "single"
                        }
                      },
                      "value": {
                        "type": "expression",
                        "contents": {
                          "type": "literal_string",
                          "text": "int",
                          "quotes": "single"
                        }
                      }
                    },
                    {
                      "type": "key_value",
                      "key": {
                        "type": "expression",
                        "contents": {
                          "type": "literal_string",
                          "text": "TINYINT",
                          "quotes": "single"
                        }
                      },
                      "value": {
                        "type": "expression",
                        "contents": {
                          "type": "literal_string",
                          "text": "bool",
                          "quotes": "single"
                        }
                      }
                    },
                    {
                      "type": "key_value",
                      "key": {
                        "type": "expression",
                        "contents": {
                          "type": "literal_string",
                          "text": "SMALLINT",
                          "quotes": "single"
                        }
                      },
                      "value": {
                        "type": "expression",
                        "contents": {
                          "type": "literal_string",
                          "text": "int",
                          "quotes": "single"
                        }
                      }
                    },
                    {
                      "type": "key_value",
                      "key": {
                        "type": "expression",
                        "contents": {
                          "type": "literal_string",
                          "text": "VARCHAR",
                          "quotes": "single"
                        }
                      },
                      "value": {
                        "type": "expression",
                        "contents": {
                          "type": "literal_string",
                          "text": "string",
                          "quotes": "single"
                        }
                      }
                    },
                    {
                      "type": "key_value",
                      "key": {
                        "type": "expression",
                        "contents": {
                          "type": "literal_string",
                          "text": "TEXT",
                          "quotes": "single"
                        }
                      },
                      "value": {
                        "type": "expression",
                        "contents": {
                          "type": "literal_string",
                          "text": "text",
                          "quotes": "single"
                        }
                      }
                    },
                    {
                      "type": "key_value",
                      "key": {
                        "type": "expression",
                        "contents": {
                          "type": "literal_string",
                          "text": "LONGTEXT",
                          "quotes": "single"
                        }
                      },
                      "value": {
                        "type": "expression",
                        "contents": {
                          "type": "literal_string",
                          "text": "text",
                          "quotes": "single"
                        }
                      }
                    }
                  ]
                }
              }
            ]
          },
          {
            "type": "method_definition",
            "name": "__construct",
            "parameters": {
              "type": "parameters",
              "variables": [
                {
                  "type": "parameter",
                  "name": "name",
                  "default_value": ""
                },
                {
                  "type": "parameter",
                  "name": "ground",
                  "default_value": ""
                }
              ]
            },
            "block": {
              "type": "block",
              "elements": [
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "name",
                          "children": "",
                          "index": "",
                          "root": {
                            "type": "variable",
                            "name": "this",
                            "children": "",
                            "index": ""
                          }
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "name",
                          "children": "",
                          "index": ""
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "ground",
                          "children": "",
                          "index": "",
                          "root": {
                            "type": "variable",
                            "name": "this",
                            "children": "",
                            "index": ""
                          }
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "ground",
                          "children": "",
                          "index": ""
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ]
              ],
              "variables": {
                "name": {
                  "type": "variable",
                  "name": "name",
                  "children": "",
                  "index": ""
                },
                "ground": {
                  "type": "variable",
                  "name": "ground",
                  "children": "",
                  "index": ""
                }
              }
            },
            "constructor": true
          },
          {
            "type": "method_definition",
            "name": "connect_trellis",
            "parameters": {
              "type": "parameters",
              "variables": [
                {
                  "type": "parameter",
                  "name": "trellis",
                  "default_value": ""
                }
              ]
            },
            "block": {
              "type": "block",
              "elements": [
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "trellis",
                          "children": "",
                          "index": "",
                          "root": {
                            "type": "variable",
                            "name": "this",
                            "children": "",
                            "index": ""
                          }
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "trellis",
                          "children": "",
                          "index": ""
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "table",
                          "children": "",
                          "index": "",
                          "root": {
                            "type": "variable",
                            "name": "trellis",
                            "children": "",
                            "index": ""
                          }
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "this",
                          "children": "",
                          "index": ""
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ]
              ],
              "variables": {
                "trellis": {
                  "type": "variable",
                  "name": "trellis",
                  "children": "",
                  "index": ""
                },
                "table": {
                  "type": "variable",
                  "name": "table",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "trellis",
                    "children": "",
                    "index": ""
                  }
                },
                "this": {
                  "type": "variable",
                  "name": "this",
                  "children": "",
                  "index": ""
                }
              }
            },
            "constructor": false
          },
          {
            "type": "method_definition",
            "name": "convert_to_property_type",
            "parameters": {
              "type": "parameters",
              "variables": [
                {
                  "type": "parameter",
                  "name": "field_type",
                  "default_value": ""
                }
              ]
            },
            "block": {
              "type": "block",
              "elements": [
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "name",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "invoke_function",
                          "name": "preg_replace",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "regex",
                                  "text": "\\s*\\(.*\\).*"
                                }
                              },
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "literal_string",
                                  "text": "",
                                  "quotes": "single"
                                }
                              },
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "variable",
                                  "name": "field_type",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            ]
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "name",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "invoke_function",
                          "name": "strtoupper",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "variable",
                                  "name": "name",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            ]
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                {
                  "type": "expression_list",
                  "expressions": [
                    "return",
                    {
                      "type": "expression",
                      "contents": {
                        "type": "invoke_static_member",
                        "class_name": "Table",
                        "target": {
                          "type": "variable",
                          "name": "types",
                          "children": "",
                          "index": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "name",
                                "children": "",
                                "index": ""
                              }
                            }
                          ]
                        }
                      }
                    }
                  ]
                }
              ],
              "variables": {
                "name": {
                  "type": "variable",
                  "name": "name",
                  "children": "",
                  "index": ""
                },
                "field_type": {
                  "type": "variable",
                  "name": "field_type",
                  "children": "",
                  "index": ""
                },
                "types": {
                  "type": "variable",
                  "name": "types",
                  "children": "",
                  "index": [
                    {
                      "type": "expression",
                      "contents": {
                        "type": "variable",
                        "name": "name",
                        "children": "",
                        "index": ""
                      }
                    }
                  ]
                }
              }
            },
            "constructor": false
          },
          {
            "type": "method_definition",
            "name": "create_from_trellis",
            "parameters": {
              "type": "parameters",
              "variables": [
                {
                  "type": "parameter",
                  "name": "trellis",
                  "default_value": ""
                },
                {
                  "type": "parameter",
                  "name": "ground",
                  "default_value": ""
                }
              ]
            },
            "block": {
              "type": "block",
              "elements": [
                {
                  "type": "comment",
                  "text": " If a developer wants to replace an existing table object,",
                  "multiline": 0
                },
                {
                  "type": "comment",
                  "text": " this function is not the way to do it.",
                  "multiline": 0
                },
                {
                  "type": "control",
                  "name": "if",
                  "condition": [
                    {
                      "type": "expression",
                      "contents": {
                        "type": "variable",
                        "name": "table",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "trellis",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  ],
                  "block": {
                    "type": "block",
                    "elements": {
                      "type": "expression_list",
                      "expressions": [
                        "return",
                        {
                          "type": "expression",
                          "contents": {
                            "type": "variable",
                            "name": "table",
                            "children": "",
                            "index": "",
                            "root": {
                              "type": "variable",
                              "name": "trellis",
                              "children": "",
                              "index": ""
                            }
                          }
                        }
                      ]
                    },
                    "variables": {
                      "table": {
                        "type": "variable",
                        "name": "table",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "trellis",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  }
                },
                {
                  "type": "control",
                  "name": "if",
                  "condition": [
                    {
                      "type": "expression",
                      "contents": {
                        "type": "variable",
                        "name": "ground",
                        "children": "",
                        "index": ""
                      }
                    }
                  ],
                  "block": {
                    "type": "block",
                    "elements": [
                      {
                        "type": "expression_list",
                        "expressions": [
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "ground",
                              "children": "",
                              "index": ""
                            }
                          },
                          {
                            "type": "operator",
                            "symbol": "="
                          },
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "ground",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "trellis",
                                "children": "",
                                "index": ""
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "terminator"
                      }
                    ],
                    "variables": {
                      "ground": {
                        "type": "variable",
                        "name": "ground",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "trellis",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  }
                },
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "table",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "instantiate_class",
                          "name": "Table",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "invoke_function",
                                  "name": "get_table_name",
                                  "arguments": {
                                    "type": "arguments",
                                    "expressions": [
                                      ""
                                    ]
                                  },
                                  "root": {
                                    "type": "variable",
                                    "name": "trellis",
                                    "children": "",
                                    "index": ""
                                  }
                                }
                              },
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "variable",
                                  "name": "ground",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            ]
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                [
                  {
                    "type": "expression",
                    "contents": {
                      "type": "invoke_function",
                      "name": "connect_trellis",
                      "arguments": {
                        "type": "arguments",
                        "expressions": [
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "trellis",
                              "children": "",
                              "index": ""
                            }
                          }
                        ]
                      },
                      "root": {
                        "type": "variable",
                        "name": "table",
                        "children": "",
                        "index": ""
                      }
                    }
                  },
                  {
                    "type": "terminator"
                  }
                ],
                {
                  "type": "expression_list",
                  "expressions": [
                    "return",
                    {
                      "type": "expression",
                      "contents": {
                        "type": "variable",
                        "name": "table",
                        "children": "",
                        "index": ""
                      }
                    }
                  ]
                }
              ],
              "variables": {
                "table": {
                  "type": "variable",
                  "name": "table",
                  "children": "",
                  "index": ""
                },
                "ground": {
                  "type": "variable",
                  "name": "ground",
                  "children": "",
                  "index": ""
                },
                "trellis": {
                  "type": "variable",
                  "name": "trellis",
                  "children": "",
                  "index": ""
                }
              }
            },
            "constructor": false
          },
          {
            "type": "method_definition",
            "name": "create_from_join",
            "parameters": {
              "type": "parameters",
              "variables": [
                {
                  "type": "parameter",
                  "name": "join",
                  "default_value": ""
                },
                {
                  "type": "parameter",
                  "name": "ground",
                  "default_value": ""
                }
              ]
            },
            "block": {
              "type": "block",
              "elements": [
                {
                  "type": "control",
                  "name": "if",
                  "condition": [
                    {
                      "type": "expression",
                      "contents": {
                        "type": "variable",
                        "name": "table",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "join",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  ],
                  "block": {
                    "type": "block",
                    "elements": {
                      "type": "expression_list",
                      "expressions": [
                        "return",
                        {
                          "type": "expression",
                          "contents": {
                            "type": "variable",
                            "name": "table",
                            "children": "",
                            "index": "",
                            "root": {
                              "type": "variable",
                              "name": "join",
                              "children": "",
                              "index": ""
                            }
                          }
                        }
                      ]
                    },
                    "variables": {
                      "table": {
                        "type": "variable",
                        "name": "table",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "join",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  }
                },
                {
                  "type": "control",
                  "name": "if",
                  "condition": [
                    {
                      "type": "expression",
                      "contents": {
                        "type": "variable",
                        "name": "ground",
                        "children": "",
                        "index": ""
                      }
                    }
                  ],
                  "block": {
                    "type": "block",
                    "elements": [
                      {
                        "type": "expression_list",
                        "expressions": [
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "ground",
                              "children": "",
                              "index": ""
                            }
                          },
                          {
                            "type": "operator",
                            "symbol": "="
                          },
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "ground",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "join",
                                "children": "",
                                "index": ""
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "terminator"
                      }
                    ],
                    "variables": {
                      "ground": {
                        "type": "variable",
                        "name": "ground",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "join",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  }
                },
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "table",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "instantiate_class",
                          "name": "Table",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "variable",
                                  "name": "table_name",
                                  "children": "",
                                  "index": "",
                                  "root": {
                                    "type": "variable",
                                    "name": "join",
                                    "children": "",
                                    "index": ""
                                  }
                                }
                              },
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "variable",
                                  "name": "ground",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            ]
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                {
                  "type": "expression_list",
                  "expressions": [
                    "return",
                    {
                      "type": "expression",
                      "contents": {
                        "type": "variable",
                        "name": "table",
                        "children": "",
                        "index": ""
                      }
                    }
                  ]
                }
              ],
              "variables": {
                "table": {
                  "type": "variable",
                  "name": "table",
                  "children": "",
                  "index": ""
                },
                "ground": {
                  "type": "variable",
                  "name": "ground",
                  "children": "",
                  "index": ""
                },
                "table_name": {
                  "type": "variable",
                  "name": "table_name",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "join",
                    "children": "",
                    "index": ""
                  }
                }
              }
            },
            "constructor": false
          },
          {
            "type": "method_definition",
            "name": "create_sql",
            "parameters": {
              "type": "parameters",
              "variables": [
                ""
              ]
            },
            "block": {
              "type": "block",
              "elements": [
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "fields",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "create_array",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              ""
                            ]
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                {
                  "type": "foreach_object",
                  "object": {
                    "type": "variable",
                    "name": "properties",
                    "children": "",
                    "index": "",
                    "root": {
                      "type": "variable",
                      "name": "this",
                      "children": "",
                      "index": ""
                    }
                  },
                  "key": "name",
                  "value": {
                    "type": "variable",
                    "name": "property",
                    "children": "",
                    "index": ""
                  },
                  "block": {
                    "type": "block",
                    "elements": [
                      [
                        {
                          "type": "expression_list",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "type",
                                "children": "",
                                "index": ""
                              }
                            },
                            {
                              "type": "operator",
                              "symbol": "="
                            },
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "property_types",
                                "children": "",
                                "index": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "type",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "property",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  }
                                ],
                                "root": {
                                  "type": "variable",
                                  "name": "this",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "terminator"
                        }
                      ],
                      [
                        {
                          "type": "expression",
                          "contents": {
                            "type": "variable",
                            "name": "fields",
                            "children": "",
                            "index": null,
                            "append": {
                              "type": "expression",
                              "contents": {
                                "type": "conversion",
                                "out_type": "object",
                                "expression": {
                                  "type": "expression",
                                  "contents": {
                                    "type": "associative_array_definition",
                                    "items": [
                                      {
                                        "type": "key_value",
                                        "key": {
                                          "type": "expression",
                                          "contents": {
                                            "type": "literal_string",
                                            "text": "name",
                                            "quotes": "single"
                                          }
                                        },
                                        "value": {
                                          "type": "expression",
                                          "contents": {
                                            "type": "variable",
                                            "name": "name",
                                            "children": "",
                                            "index": ""
                                          }
                                        }
                                      },
                                      {
                                        "type": "key_value",
                                        "key": {
                                          "type": "expression",
                                          "contents": {
                                            "type": "literal_string",
                                            "text": "type",
                                            "quotes": "single"
                                          }
                                        },
                                        "value": {
                                          "type": "expression",
                                          "contents": {
                                            "type": "invoke_function",
                                            "name": "get_field_type",
                                            "arguments": {
                                              "type": "arguments",
                                              "expressions": [
                                                ""
                                              ]
                                            },
                                            "root": {
                                              "type": "variable",
                                              "name": "type",
                                              "children": "",
                                              "index": ""
                                            }
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        },
                        {
                          "type": "terminator"
                        }
                      ]
                    ],
                    "variables": {
                      "type": {
                        "type": "variable",
                        "name": "type",
                        "children": "",
                        "index": ""
                      },
                      "property_types": {
                        "type": "variable",
                        "name": "property_types",
                        "children": "",
                        "index": [
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "type",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "property",
                                "children": "",
                                "index": ""
                              }
                            }
                          }
                        ],
                        "root": {
                          "type": "variable",
                          "name": "this",
                          "children": "",
                          "index": ""
                        }
                      },
                      "fields": {
                        "type": "variable",
                        "name": "fields",
                        "children": "",
                        "index": null,
                        "append": {
                          "type": "expression",
                          "contents": {
                            "type": "conversion",
                            "out_type": "object",
                            "expression": {
                              "type": "expression",
                              "contents": {
                                "type": "associative_array_definition",
                                "items": [
                                  {
                                    "type": "key_value",
                                    "key": {
                                      "type": "expression",
                                      "contents": {
                                        "type": "literal_string",
                                        "text": "name",
                                        "quotes": "single"
                                      }
                                    },
                                    "value": {
                                      "type": "expression",
                                      "contents": {
                                        "type": "variable",
                                        "name": "name",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  },
                                  {
                                    "type": "key_value",
                                    "key": {
                                      "type": "expression",
                                      "contents": {
                                        "type": "literal_string",
                                        "text": "type",
                                        "quotes": "single"
                                      }
                                    },
                                    "value": {
                                      "type": "expression",
                                      "contents": {
                                        "type": "invoke_function",
                                        "name": "get_field_type",
                                        "arguments": {
                                          "type": "arguments",
                                          "expressions": [
                                            ""
                                          ]
                                        },
                                        "root": {
                                          "type": "variable",
                                          "name": "type",
                                          "children": "",
                                          "index": ""
                                        }
                                      }
                                    }
                                  }
                                ]
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                },
                {
                  "type": "control",
                  "name": "if",
                  "condition": [
                    {
                      "type": "expression_list",
                      "expressions": [
                        {
                          "type": "expression",
                          "contents": {
                            "type": "invoke_function",
                            "name": "is_array",
                            "arguments": {
                              "type": "arguments",
                              "expressions": [
                                {
                                  "type": "expression",
                                  "contents": {
                                    "type": "variable",
                                    "name": "primary_keys",
                                    "children": "",
                                    "index": "",
                                    "root": {
                                      "type": "variable",
                                      "name": "this",
                                      "children": "",
                                      "index": ""
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        },
                        {
                          "type": "operator",
                          "symbol": "&&"
                        },
                        {
                          "type": "expression",
                          "contents": {
                            "type": "invoke_function",
                            "name": "count",
                            "arguments": {
                              "type": "arguments",
                              "expressions": [
                                {
                                  "type": "expression",
                                  "contents": {
                                    "type": "variable",
                                    "name": "primary_keys",
                                    "children": "",
                                    "index": "",
                                    "root": {
                                      "type": "variable",
                                      "name": "this",
                                      "children": "",
                                      "index": ""
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        },
                        {
                          "type": "operator",
                          "symbol": ">"
                        },
                        {
                          "type": "expression",
                          "contents": "0"
                        }
                      ]
                    }
                  ],
                  "block": {
                    "type": "block",
                    "elements": [
                      {
                        "type": "expression_list",
                        "expressions": [
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "primary_keys",
                              "children": "",
                              "index": ""
                            }
                          },
                          {
                            "type": "operator",
                            "symbol": "="
                          },
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "primary_keys",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "this",
                                "children": "",
                                "index": ""
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "terminator"
                      }
                    ],
                    "variables": {
                      "primary_keys": {
                        "type": "variable",
                        "name": "primary_keys",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "this",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  }
                },
                {
                  "type": "control",
                  "name": "else",
                  "condition": null,
                  "block": {
                    "type": "block",
                    "elements": [
                      {
                        "type": "expression_list",
                        "expressions": [
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "primary_keys",
                              "children": "",
                              "index": ""
                            }
                          },
                          {
                            "type": "operator",
                            "symbol": "="
                          },
                          {
                            "type": "expression",
                            "contents": {
                              "type": "create_array",
                              "arguments": {
                                "type": "arguments",
                                "expressions": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "primary_key",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "this",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  }
                                ]
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "terminator"
                      }
                    ],
                    "variables": {
                      "primary_keys": {
                        "type": "variable",
                        "name": "primary_keys",
                        "children": "",
                        "index": ""
                      },
                      "primary_key": {
                        "type": "variable",
                        "name": "primary_key",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "this",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  }
                },
                {
                  "type": "expression_list",
                  "expressions": [
                    "return",
                    {
                      "type": "expression",
                      "contents": {
                        "type": "invoke_static_member",
                        "class_name": "Table",
                        "target": {
                          "type": "invoke_function",
                          "name": "create_sql_from_array",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "variable",
                                  "name": "name",
                                  "children": "",
                                  "index": "",
                                  "root": {
                                    "type": "variable",
                                    "name": "this",
                                    "children": "",
                                    "index": ""
                                  }
                                }
                              },
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "variable",
                                  "name": "fields",
                                  "children": "",
                                  "index": ""
                                }
                              },
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "variable",
                                  "name": "primary_keys",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            ]
                          }
                        }
                      }
                    }
                  ]
                }
              ],
              "variables": {
                "fields": {
                  "type": "variable",
                  "name": "fields",
                  "children": "",
                  "index": ""
                },
                "properties": {
                  "type": "variable",
                  "name": "properties",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "this",
                    "children": "",
                    "index": ""
                  }
                },
                "property": {
                  "type": "variable",
                  "name": "property",
                  "children": "",
                  "index": ""
                },
                "type": {
                  "type": "variable",
                  "name": "type",
                  "children": "",
                  "index": ""
                },
                "property_types": {
                  "type": "variable",
                  "name": "property_types",
                  "children": "",
                  "index": [
                    {
                      "type": "expression",
                      "contents": {
                        "type": "variable",
                        "name": "type",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "property",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  ],
                  "root": {
                    "type": "variable",
                    "name": "this",
                    "children": "",
                    "index": ""
                  }
                },
                "primary_keys": {
                  "type": "variable",
                  "name": "primary_keys",
                  "children": "",
                  "index": ""
                },
                "primary_key": {
                  "type": "variable",
                  "name": "primary_key",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "this",
                    "children": "",
                    "index": ""
                  }
                },
                "name": {
                  "type": "variable",
                  "name": "name",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "this",
                    "children": "",
                    "index": ""
                  }
                }
              }
            },
            "constructor": false
          },
          {
            "type": "method_definition",
            "name": "create_sql_from_array",
            "parameters": {
              "type": "parameters",
              "variables": [
                {
                  "type": "parameter",
                  "name": "table_name",
                  "default_value": ""
                },
                {
                  "type": "parameter",
                  "name": "source",
                  "default_value": ""
                },
                {
                  "type": "parameter",
                  "name": "primary_keys",
                  "default_value": ""
                }
              ]
            },
            "block": {
              "type": "block",
              "elements": [
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "fields",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "create_array",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              ""
                            ]
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                {
                  "type": "foreach_object",
                  "object": {
                    "type": "variable",
                    "name": "source",
                    "children": "",
                    "index": ""
                  },
                  "key": "",
                  "value": {
                    "type": "variable",
                    "name": "field",
                    "children": "",
                    "index": ""
                  },
                  "block": {
                    "type": "block",
                    "elements": [
                      [
                        {
                          "type": "expression_list",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "name",
                                "children": "",
                                "index": ""
                              }
                            },
                            {
                              "type": "operator",
                              "symbol": "="
                            },
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "name",
                                "children": "",
                                "index": "",
                                "root": {
                                  "type": "variable",
                                  "name": "field",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "terminator"
                        }
                      ],
                      [
                        {
                          "type": "expression_list",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "type",
                                "children": "",
                                "index": ""
                              }
                            },
                            {
                              "type": "operator",
                              "symbol": "="
                            },
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "type",
                                "children": "",
                                "index": "",
                                "root": {
                                  "type": "variable",
                                  "name": "field",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "terminator"
                        }
                      ],
                      {
                        "type": "control",
                        "name": "if",
                        "condition": [
                          {
                            "type": "expression_list",
                            "expressions": [
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "variable",
                                  "name": "type",
                                  "children": "",
                                  "index": ""
                                }
                              },
                              {
                                "type": "operator",
                                "symbol": "==="
                              },
                              {
                                "type": "expression",
                                "contents": "null"
                              }
                            ]
                          }
                        ],
                        "block": {
                          "type": "block",
                          "elements": {
                            "type": "command",
                            "name": "continue",
                            "expression": ""
                          },
                          "variables": {}
                        }
                      },
                      [
                        {
                          "type": "expression_list",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "field_sql",
                                "children": "",
                                "index": ""
                              }
                            },
                            {
                              "type": "operator",
                              "symbol": "="
                            },
                            {
                              "type": "expression",
                              "contents": {
                                "type": "literal_string",
                                "text": "`$name` $type",
                                "quotes": "double"
                              }
                            }
                          ]
                        },
                        {
                          "type": "terminator"
                        }
                      ],
                      {
                        "type": "control",
                        "name": "if",
                        "condition": [
                          {
                            "type": "expression",
                            "contents": {
                              "type": "invoke_function",
                              "name": "in_array",
                              "arguments": {
                                "type": "arguments",
                                "expressions": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "name",
                                      "children": "",
                                      "index": ""
                                    }
                                  },
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "primary_keys",
                                      "children": "",
                                      "index": ""
                                    }
                                  }
                                ]
                              }
                            }
                          }
                        ],
                        "block": {
                          "type": "block",
                          "elements": [
                            {
                              "type": "control",
                              "name": "if",
                              "condition": [
                                {
                                  "type": "expression_list",
                                  "expressions": [
                                    {
                                      "type": "expression",
                                      "contents": {
                                        "type": "invoke_function",
                                        "name": "strstr",
                                        "arguments": {
                                          "type": "arguments",
                                          "expressions": [
                                            {
                                              "type": "expression",
                                              "contents": {
                                                "type": "variable",
                                                "name": "type",
                                                "children": "",
                                                "index": ""
                                              }
                                            },
                                            {
                                              "type": "expression",
                                              "contents": {
                                                "type": "literal_string",
                                                "text": "INT",
                                                "quotes": "single"
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    },
                                    {
                                      "type": "operator",
                                      "symbol": "&&"
                                    },
                                    {
                                      "type": "expression",
                                      "contents": {
                                        "type": "variable",
                                        "name": "primary_keys",
                                        "children": "",
                                        "index": [
                                          {
                                            "type": "expression",
                                            "contents": "0"
                                          }
                                        ]
                                      }
                                    },
                                    {
                                      "type": "operator",
                                      "symbol": "=="
                                    },
                                    {
                                      "type": "expression",
                                      "contents": {
                                        "type": "variable",
                                        "name": "name",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  ]
                                }
                              ],
                              "block": {
                                "type": "block",
                                "elements": [
                                  {
                                    "type": "expression_list",
                                    "expressions": [
                                      {
                                        "type": "expression",
                                        "contents": {
                                          "type": "variable",
                                          "name": "field_sql",
                                          "children": "",
                                          "index": ""
                                        }
                                      },
                                      {
                                        "type": "operator",
                                        "symbol": ".="
                                      },
                                      {
                                        "type": "expression",
                                        "contents": {
                                          "type": "literal_string",
                                          "text": " AUTO_INCREMENT",
                                          "quotes": "single"
                                        }
                                      }
                                    ]
                                  },
                                  {
                                    "type": "terminator"
                                  }
                                ],
                                "variables": {
                                  "field_sql": {
                                    "type": "variable",
                                    "name": "field_sql",
                                    "children": "",
                                    "index": ""
                                  }
                                }
                              }
                            }
                          ],
                          "variables": {
                            "type": {
                              "type": "variable",
                              "name": "type",
                              "children": "",
                              "index": ""
                            },
                            "primary_keys": {
                              "type": "variable",
                              "name": "primary_keys",
                              "children": "",
                              "index": [
                                {
                                  "type": "expression",
                                  "contents": "0"
                                }
                              ]
                            },
                            "name": {
                              "type": "variable",
                              "name": "name",
                              "children": "",
                              "index": ""
                            },
                            "field_sql": {
                              "type": "variable",
                              "name": "field_sql",
                              "children": "",
                              "index": ""
                            }
                          }
                        }
                      },
                      [
                        {
                          "type": "expression",
                          "contents": {
                            "type": "variable",
                            "name": "fields",
                            "children": "",
                            "index": null,
                            "append": {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "field_sql",
                                "children": "",
                                "index": ""
                              }
                            }
                          }
                        },
                        {
                          "type": "terminator"
                        }
                      ]
                    ],
                    "variables": {
                      "name": {
                        "type": "variable",
                        "name": "name",
                        "children": "",
                        "index": ""
                      },
                      "type": {
                        "type": "variable",
                        "name": "type",
                        "children": "",
                        "index": ""
                      },
                      "field_sql": {
                        "type": "variable",
                        "name": "field_sql",
                        "children": "",
                        "index": ""
                      },
                      "primary_keys": {
                        "type": "variable",
                        "name": "primary_keys",
                        "children": "",
                        "index": [
                          {
                            "type": "expression",
                            "contents": "0"
                          }
                        ]
                      },
                      "fields": {
                        "type": "variable",
                        "name": "fields",
                        "children": "",
                        "index": null,
                        "append": {
                          "type": "expression",
                          "contents": {
                            "type": "variable",
                            "name": "field_sql",
                            "children": "",
                            "index": ""
                          }
                        }
                      }
                    }
                  }
                },
                {
                  "type": "comment",
                  "text": " Currently can't create a table without fields.  Seems reasonable enough.",
                  "multiline": 0
                },
                {
                  "type": "control",
                  "name": "if",
                  "condition": [
                    {
                      "type": "expression_list",
                      "expressions": [
                        {
                          "type": "expression",
                          "contents": {
                            "type": "invoke_function",
                            "name": "count",
                            "arguments": {
                              "type": "arguments",
                              "expressions": [
                                {
                                  "type": "expression",
                                  "contents": {
                                    "type": "variable",
                                    "name": "fields",
                                    "children": "",
                                    "index": ""
                                  }
                                }
                              ]
                            }
                          }
                        },
                        {
                          "type": "operator",
                          "symbol": "=="
                        },
                        {
                          "type": "expression",
                          "contents": "0"
                        }
                      ]
                    }
                  ],
                  "block": {
                    "type": "block",
                    "elements": [
                      {
                        "type": "control",
                        "name": "if",
                        "condition": [
                          {
                            "type": "expression_list",
                            "expressions": [
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "invoke_function",
                                  "name": "count",
                                  "arguments": {
                                    "type": "arguments",
                                    "expressions": [
                                      {
                                        "type": "expression",
                                        "contents": {
                                          "type": "variable",
                                          "name": "source",
                                          "children": "",
                                          "index": ""
                                        }
                                      }
                                    ]
                                  }
                                }
                              },
                              {
                                "type": "operator",
                                "symbol": ">"
                              },
                              {
                                "type": "expression",
                                "contents": "0"
                              }
                            ]
                          }
                        ],
                        "block": {
                          "type": "block",
                          "elements": {
                            "type": "command",
                            "name": "throw",
                            "expression": {
                              "type": "expression",
                              "contents": {
                                "type": "instantiate_class",
                                "name": "Exception",
                                "arguments": {
                                  "type": "arguments",
                                  "expressions": [
                                    {
                                      "type": "expression",
                                      "contents": {
                                        "type": "literal_string",
                                        "text": "None of the field arguments for creating $table_name have a type.",
                                        "quotes": "double"
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          },
                          "variables": {}
                        }
                      },
                      {
                        "type": "control",
                        "name": "else",
                        "condition": null,
                        "block": {
                          "type": "block",
                          "elements": {
                            "type": "command",
                            "name": "throw",
                            "expression": {
                              "type": "expression",
                              "contents": {
                                "type": "instantiate_class",
                                "name": "Exception",
                                "arguments": {
                                  "type": "arguments",
                                  "expressions": [
                                    {
                                      "type": "expression",
                                      "contents": {
                                        "type": "literal_string",
                                        "text": "Cannot create a table without fields: $table_name.",
                                        "quotes": "double"
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          },
                          "variables": {}
                        }
                      }
                    ],
                    "variables": {
                      "source": {
                        "type": "variable",
                        "name": "source",
                        "children": "",
                        "index": ""
                      }
                    }
                  }
                },
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "keys",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "create_array",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              ""
                            ]
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                {
                  "type": "foreach_object",
                  "object": {
                    "type": "variable",
                    "name": "primary_keys",
                    "children": "",
                    "index": ""
                  },
                  "key": "",
                  "value": {
                    "type": "variable",
                    "name": "key",
                    "children": "",
                    "index": ""
                  },
                  "block": {
                    "type": "block",
                    "elements": [
                      [
                        {
                          "type": "expression",
                          "contents": {
                            "type": "variable",
                            "name": "keys",
                            "children": "",
                            "index": null,
                            "append": {
                              "type": "expression",
                              "contents": {
                                "type": "literal_string",
                                "text": "`$key`",
                                "quotes": "double"
                              }
                            }
                          }
                        },
                        {
                          "type": "terminator"
                        }
                      ]
                    ],
                    "variables": {
                      "keys": {
                        "type": "variable",
                        "name": "keys",
                        "children": "",
                        "index": null,
                        "append": {
                          "type": "expression",
                          "contents": {
                            "type": "literal_string",
                            "text": "`$key`",
                            "quotes": "double"
                          }
                        }
                      }
                    }
                  }
                },
                [
                  {
                    "type": "expression",
                    "contents": {
                      "type": "variable",
                      "name": "fields",
                      "children": "",
                      "index": null,
                      "append": {
                        "type": "expression_list",
                        "expressions": [
                          {
                            "type": "expression",
                            "contents": {
                              "type": "literal_string",
                              "text": "PRIMARY KEY (",
                              "quotes": "double"
                            }
                          },
                          {
                            "type": "operator",
                            "symbol": "+"
                          },
                          {
                            "type": "expression",
                            "contents": {
                              "type": "invoke_function",
                              "name": "implode",
                              "arguments": {
                                "type": "arguments",
                                "expressions": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "literal_string",
                                      "text": ", ",
                                      "quotes": "single"
                                    }
                                  },
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "keys",
                                      "children": "",
                                      "index": ""
                                    }
                                  }
                                ]
                              }
                            }
                          },
                          {
                            "type": "operator",
                            "symbol": "+"
                          },
                          {
                            "type": "expression",
                            "contents": {
                              "type": "literal_string",
                              "text": ")\\n",
                              "quotes": "double"
                            }
                          }
                        ]
                      }
                    }
                  },
                  {
                    "type": "terminator"
                  }
                ],
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "sql",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "literal_string",
                          "text": "CREATE TABLE IF NOT EXISTS `",
                          "quotes": "single"
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "+"
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "table_name",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "+"
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "literal_string",
                          "text": "` (\\n",
                          "quotes": "double"
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "sql",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": ".="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "invoke_function",
                          "name": "implode",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "literal_string",
                                  "text": ",\\n",
                                  "quotes": "double"
                                }
                              },
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "variable",
                                  "name": "fields",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            ]
                          }
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "+"
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "literal_string",
                          "text": "\\n",
                          "quotes": "double"
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "sql",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": ".="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "literal_string",
                          "text": ");\\n",
                          "quotes": "double"
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                {
                  "type": "expression_list",
                  "expressions": [
                    "return",
                    {
                      "type": "expression",
                      "contents": {
                        "type": "variable",
                        "name": "sql",
                        "children": "",
                        "index": ""
                      }
                    }
                  ]
                }
              ],
              "variables": {
                "fields": {
                  "type": "variable",
                  "name": "fields",
                  "children": "",
                  "index": ""
                },
                "source": {
                  "type": "variable",
                  "name": "source",
                  "children": "",
                  "index": ""
                },
                "field": {
                  "type": "variable",
                  "name": "field",
                  "children": "",
                  "index": ""
                },
                "name": {
                  "type": "variable",
                  "name": "name",
                  "children": "",
                  "index": ""
                },
                "type": {
                  "type": "variable",
                  "name": "type",
                  "children": "",
                  "index": ""
                },
                "field_sql": {
                  "type": "variable",
                  "name": "field_sql",
                  "children": "",
                  "index": ""
                },
                "primary_keys": {
                  "type": "variable",
                  "name": "primary_keys",
                  "children": "",
                  "index": ""
                },
                "keys": {
                  "type": "variable",
                  "name": "keys",
                  "children": "",
                  "index": null,
                  "append": {
                    "type": "expression",
                    "contents": {
                      "type": "literal_string",
                      "text": "`$key`",
                      "quotes": "double"
                    }
                  }
                },
                "key": {
                  "type": "variable",
                  "name": "key",
                  "children": "",
                  "index": ""
                },
                "sql": {
                  "type": "variable",
                  "name": "sql",
                  "children": "",
                  "index": ""
                },
                "table_name": {
                  "type": "variable",
                  "name": "table_name",
                  "children": "",
                  "index": ""
                }
              }
            },
            "constructor": false
          },
          {
            "type": "method_definition",
            "name": "create_sql_from_trellis",
            "parameters": {
              "type": "parameters",
              "variables": [
                {
                  "type": "parameter",
                  "name": "trellis",
                  "default_value": ""
                }
              ]
            },
            "block": {
              "type": "block",
              "elements": [
                {
                  "type": "control",
                  "name": "if",
                  "condition": [
                    {
                      "type": "expression",
                      "contents": {
                        "type": "variable",
                        "name": "trellis",
                        "children": "",
                        "index": ""
                      }
                    }
                  ],
                  "block": {
                    "type": "block",
                    "elements": [
                      {
                        "type": "control",
                        "name": "if",
                        "condition": [
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "trellis",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "this",
                                "children": "",
                                "index": ""
                              }
                            }
                          }
                        ],
                        "block": {
                          "type": "block",
                          "elements": {
                            "type": "command",
                            "name": "throw",
                            "expression": {
                              "type": "expression",
                              "contents": {
                                "type": "instantiate_class",
                                "name": "Exception",
                                "arguments": {
                                  "type": "arguments",
                                  "expressions": [
                                    {
                                      "type": "expression",
                                      "contents": {
                                        "type": "literal_string",
                                        "text": "No valid trellis to generate sql from.",
                                        "quotes": "double"
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          },
                          "variables": {}
                        }
                      },
                      [
                        {
                          "type": "expression_list",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "trellis",
                                "children": "",
                                "index": ""
                              }
                            },
                            {
                              "type": "operator",
                              "symbol": "="
                            },
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "trellis",
                                "children": "",
                                "index": "",
                                "root": {
                                  "type": "variable",
                                  "name": "this",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "terminator"
                        }
                      ]
                    ],
                    "variables": {
                      "trellis": {
                        "type": "variable",
                        "name": "trellis",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "this",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  }
                },
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "core_properties",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "invoke_function",
                          "name": "get_core_properties",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              ""
                            ]
                          },
                          "root": {
                            "type": "variable",
                            "name": "trellis",
                            "children": "",
                            "index": ""
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                {
                  "type": "control",
                  "name": "if",
                  "condition": [
                    {
                      "type": "expression_list",
                      "expressions": [
                        {
                          "type": "expression",
                          "contents": {
                            "type": "invoke_function",
                            "name": "count",
                            "arguments": {
                              "type": "arguments",
                              "expressions": [
                                {
                                  "type": "expression",
                                  "contents": {
                                    "type": "variable",
                                    "name": "core_properties",
                                    "children": "",
                                    "index": ""
                                  }
                                }
                              ]
                            }
                          }
                        },
                        {
                          "type": "operator",
                          "symbol": "=="
                        },
                        {
                          "type": "expression",
                          "contents": "0"
                        }
                      ]
                    }
                  ],
                  "block": {
                    "type": "block",
                    "elements": [
                      {
                        "type": "command",
                        "name": "throw",
                        "expression": {
                          "type": "expression",
                          "contents": {
                            "type": "instantiate_class",
                            "name": "Exception",
                            "arguments": {
                              "type": "arguments",
                              "expressions": [
                                {
                                  "type": "expression",
                                  "contents": {
                                    "type": "literal_string",
                                    "text": "Cannot create a table for $trellis->name.  $trellis->name does not have any core properties.",
                                    "quotes": "double"
                                  }
                                }
                              ]
                            }
                          }
                        }
                      }
                    ],
                    "variables": {}
                  }
                },
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "fields",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "create_array",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              ""
                            ]
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                {
                  "type": "foreach_object",
                  "object": {
                    "type": "variable",
                    "name": "core_properties",
                    "children": "",
                    "index": ""
                  },
                  "key": "",
                  "value": {
                    "type": "variable",
                    "name": "property",
                    "children": "",
                    "index": ""
                  },
                  "block": {
                    "type": "block",
                    "elements": [
                      [
                        {
                          "type": "expression_list",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "field",
                                "children": "",
                                "index": ""
                              }
                            },
                            {
                              "type": "operator",
                              "symbol": "="
                            },
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "properties",
                                "children": "",
                                "index": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "name",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "property",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  }
                                ],
                                "root": {
                                  "type": "variable",
                                  "name": "this",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "terminator"
                        }
                      ],
                      {
                        "type": "comment",
                        "text": " Don't duplicate shared fields.",
                        "multiline": 0
                      },
                      {
                        "type": "control",
                        "name": "if",
                        "condition": [
                          {
                            "type": "expression_list",
                            "expressions": [
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "variable",
                                  "name": "field",
                                  "children": "",
                                  "index": ""
                                }
                              },
                              {
                                "type": "operator",
                                "symbol": "&&"
                              },
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "variable",
                                  "name": "share",
                                  "children": "",
                                  "index": "",
                                  "root": {
                                    "type": "variable",
                                    "name": "field",
                                    "children": "",
                                    "index": ""
                                  }
                                }
                              }
                            ]
                          }
                        ],
                        "block": {
                          "type": "block",
                          "elements": {
                            "type": "command",
                            "name": "continue",
                            "expression": ""
                          },
                          "variables": {}
                        }
                      },
                      [
                        {
                          "type": "expression",
                          "contents": {
                            "type": "variable",
                            "name": "fields",
                            "children": "",
                            "index": null,
                            "append": {
                              "type": "expression",
                              "contents": {
                                "type": "conversion",
                                "out_type": "object",
                                "expression": {
                                  "type": "expression",
                                  "contents": {
                                    "type": "associative_array_definition",
                                    "items": [
                                      {
                                        "type": "key_value",
                                        "key": {
                                          "type": "expression",
                                          "contents": {
                                            "type": "literal_string",
                                            "text": "name",
                                            "quotes": "single"
                                          }
                                        },
                                        "value": {
                                          "type": "expression",
                                          "contents": {
                                            "type": "invoke_function",
                                            "name": "get_field_name",
                                            "arguments": {
                                              "type": "arguments",
                                              "expressions": [
                                                ""
                                              ]
                                            },
                                            "root": {
                                              "type": "variable",
                                              "name": "property",
                                              "children": "",
                                              "index": ""
                                            }
                                          }
                                        }
                                      },
                                      {
                                        "type": "key_value",
                                        "key": {
                                          "type": "expression",
                                          "contents": {
                                            "type": "literal_string",
                                            "text": "type",
                                            "quotes": "single"
                                          }
                                        },
                                        "value": {
                                          "type": "expression",
                                          "contents": {
                                            "type": "invoke_function",
                                            "name": "get_field_type",
                                            "arguments": {
                                              "type": "arguments",
                                              "expressions": [
                                                ""
                                              ]
                                            },
                                            "root": {
                                              "type": "variable",
                                              "name": "property",
                                              "children": "",
                                              "index": ""
                                            }
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        },
                        {
                          "type": "terminator"
                        }
                      ]
                    ],
                    "variables": {
                      "field": {
                        "type": "variable",
                        "name": "field",
                        "children": "",
                        "index": ""
                      },
                      "properties": {
                        "type": "variable",
                        "name": "properties",
                        "children": "",
                        "index": [
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "name",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "property",
                                "children": "",
                                "index": ""
                              }
                            }
                          }
                        ],
                        "root": {
                          "type": "variable",
                          "name": "this",
                          "children": "",
                          "index": ""
                        }
                      },
                      "share": {
                        "type": "variable",
                        "name": "share",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "field",
                          "children": "",
                          "index": ""
                        }
                      },
                      "fields": {
                        "type": "variable",
                        "name": "fields",
                        "children": "",
                        "index": null,
                        "append": {
                          "type": "expression",
                          "contents": {
                            "type": "conversion",
                            "out_type": "object",
                            "expression": {
                              "type": "expression",
                              "contents": {
                                "type": "associative_array_definition",
                                "items": [
                                  {
                                    "type": "key_value",
                                    "key": {
                                      "type": "expression",
                                      "contents": {
                                        "type": "literal_string",
                                        "text": "name",
                                        "quotes": "single"
                                      }
                                    },
                                    "value": {
                                      "type": "expression",
                                      "contents": {
                                        "type": "invoke_function",
                                        "name": "get_field_name",
                                        "arguments": {
                                          "type": "arguments",
                                          "expressions": [
                                            ""
                                          ]
                                        },
                                        "root": {
                                          "type": "variable",
                                          "name": "property",
                                          "children": "",
                                          "index": ""
                                        }
                                      }
                                    }
                                  },
                                  {
                                    "type": "key_value",
                                    "key": {
                                      "type": "expression",
                                      "contents": {
                                        "type": "literal_string",
                                        "text": "type",
                                        "quotes": "single"
                                      }
                                    },
                                    "value": {
                                      "type": "expression",
                                      "contents": {
                                        "type": "invoke_function",
                                        "name": "get_field_type",
                                        "arguments": {
                                          "type": "arguments",
                                          "expressions": [
                                            ""
                                          ]
                                        },
                                        "root": {
                                          "type": "variable",
                                          "name": "property",
                                          "children": "",
                                          "index": ""
                                        }
                                      }
                                    }
                                  }
                                ]
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                },
                {
                  "type": "control",
                  "name": "if",
                  "condition": [
                    {
                      "type": "expression_list",
                      "expressions": [
                        {
                          "type": "expression",
                          "contents": {
                            "type": "invoke_function",
                            "name": "is_array",
                            "arguments": {
                              "type": "arguments",
                              "expressions": [
                                {
                                  "type": "expression",
                                  "contents": {
                                    "type": "variable",
                                    "name": "primary_keys",
                                    "children": "",
                                    "index": "",
                                    "root": {
                                      "type": "variable",
                                      "name": "this",
                                      "children": "",
                                      "index": ""
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        },
                        {
                          "type": "operator",
                          "symbol": "&&"
                        },
                        {
                          "type": "expression",
                          "contents": {
                            "type": "invoke_function",
                            "name": "count",
                            "arguments": {
                              "type": "arguments",
                              "expressions": [
                                {
                                  "type": "expression",
                                  "contents": {
                                    "type": "variable",
                                    "name": "primary_keys",
                                    "children": "",
                                    "index": "",
                                    "root": {
                                      "type": "variable",
                                      "name": "this",
                                      "children": "",
                                      "index": ""
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        },
                        {
                          "type": "operator",
                          "symbol": ">"
                        },
                        {
                          "type": "expression",
                          "contents": "0"
                        }
                      ]
                    }
                  ],
                  "block": {
                    "type": "block",
                    "elements": [
                      {
                        "type": "expression_list",
                        "expressions": [
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "primary_keys",
                              "children": "",
                              "index": ""
                            }
                          },
                          {
                            "type": "operator",
                            "symbol": "="
                          },
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "primary_keys",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "this",
                                "children": "",
                                "index": ""
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "terminator"
                      }
                    ],
                    "variables": {
                      "primary_keys": {
                        "type": "variable",
                        "name": "primary_keys",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "this",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  }
                },
                {
                  "type": "control",
                  "name": "else",
                  "condition": null,
                  "block": {
                    "type": "block",
                    "elements": [
                      {
                        "type": "expression_list",
                        "expressions": [
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "primary_keys",
                              "children": "",
                              "index": ""
                            }
                          },
                          {
                            "type": "operator",
                            "symbol": "="
                          },
                          {
                            "type": "expression",
                            "contents": {
                              "type": "create_array",
                              "arguments": {
                                "type": "arguments",
                                "expressions": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "primary_key",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "trellis",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  }
                                ]
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "terminator"
                      }
                    ],
                    "variables": {
                      "primary_keys": {
                        "type": "variable",
                        "name": "primary_keys",
                        "children": "",
                        "index": ""
                      },
                      "primary_key": {
                        "type": "variable",
                        "name": "primary_key",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "trellis",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  }
                },
                {
                  "type": "expression_list",
                  "expressions": [
                    "return",
                    {
                      "type": "expression",
                      "contents": {
                        "type": "invoke_static_member",
                        "class_name": "Table",
                        "target": {
                          "type": "invoke_function",
                          "name": "create_sql_from_array",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "variable",
                                  "name": "name",
                                  "children": "",
                                  "index": "",
                                  "root": {
                                    "type": "variable",
                                    "name": "this",
                                    "children": "",
                                    "index": ""
                                  }
                                }
                              },
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "variable",
                                  "name": "fields",
                                  "children": "",
                                  "index": ""
                                }
                              },
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "variable",
                                  "name": "primary_keys",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            ]
                          }
                        }
                      }
                    }
                  ]
                }
              ],
              "variables": {
                "trellis": {
                  "type": "variable",
                  "name": "trellis",
                  "children": "",
                  "index": ""
                },
                "core_properties": {
                  "type": "variable",
                  "name": "core_properties",
                  "children": "",
                  "index": ""
                },
                "fields": {
                  "type": "variable",
                  "name": "fields",
                  "children": "",
                  "index": ""
                },
                "property": {
                  "type": "variable",
                  "name": "property",
                  "children": "",
                  "index": ""
                },
                "field": {
                  "type": "variable",
                  "name": "field",
                  "children": "",
                  "index": ""
                },
                "properties": {
                  "type": "variable",
                  "name": "properties",
                  "children": "",
                  "index": [
                    {
                      "type": "expression",
                      "contents": {
                        "type": "variable",
                        "name": "name",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "property",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  ],
                  "root": {
                    "type": "variable",
                    "name": "this",
                    "children": "",
                    "index": ""
                  }
                },
                "share": {
                  "type": "variable",
                  "name": "share",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "field",
                    "children": "",
                    "index": ""
                  }
                },
                "primary_keys": {
                  "type": "variable",
                  "name": "primary_keys",
                  "children": "",
                  "index": ""
                },
                "primary_key": {
                  "type": "variable",
                  "name": "primary_key",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "trellis",
                    "children": "",
                    "index": ""
                  }
                },
                "name": {
                  "type": "variable",
                  "name": "name",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "this",
                    "children": "",
                    "index": ""
                  }
                }
              }
            },
            "constructor": false
          },
          {
            "type": "method_definition",
            "name": "load_fields",
            "parameters": {
              "type": "parameters",
              "variables": [
                {
                  "type": "parameter",
                  "name": "db",
                  "default_value": ""
                },
                {
                  "type": "parameter",
                  "name": "name",
                  "default_value": ""
                }
              ]
            },
            "block": {
              "type": "block",
              "elements": [
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "rows",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "invoke_function",
                          "name": "query_objects",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              {
                                "type": "expression_list",
                                "expressions": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "literal_string",
                                      "text": "SHOW COLUMNS FROM ",
                                      "quotes": "single"
                                    }
                                  },
                                  {
                                    "type": "operator",
                                    "symbol": "+"
                                  },
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "name",
                                      "children": "",
                                      "index": ""
                                    }
                                  }
                                ]
                              }
                            ]
                          },
                          "root": {
                            "type": "variable",
                            "name": "db",
                            "children": "",
                            "index": ""
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "result",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "create_array",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              ""
                            ]
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                {
                  "type": "foreach_object",
                  "object": {
                    "type": "variable",
                    "name": "rows",
                    "children": "",
                    "index": ""
                  },
                  "key": "",
                  "value": {
                    "type": "variable",
                    "name": "row",
                    "children": "",
                    "index": ""
                  },
                  "block": {
                    "type": "block",
                    "elements": [
                      [
                        {
                          "type": "expression_list",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "field",
                                "children": "",
                                "index": ""
                              }
                            },
                            {
                              "type": "operator",
                              "symbol": "="
                            },
                            {
                              "type": "expression",
                              "contents": {
                                "type": "instantiate_class",
                                "name": "stdClass",
                                "arguments": {
                                  "type": "arguments",
                                  "expressions": [
                                    ""
                                  ]
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "terminator"
                        }
                      ],
                      [
                        {
                          "type": "expression_list",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "name",
                                "children": "",
                                "index": "",
                                "root": {
                                  "type": "variable",
                                  "name": "field",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            },
                            {
                              "type": "operator",
                              "symbol": "="
                            },
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "Field",
                                "children": "",
                                "index": "",
                                "root": {
                                  "type": "variable",
                                  "name": "row",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "terminator"
                        }
                      ],
                      [
                        {
                          "type": "expression_list",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "type",
                                "children": "",
                                "index": "",
                                "root": {
                                  "type": "variable",
                                  "name": "field",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            },
                            {
                              "type": "operator",
                              "symbol": "="
                            },
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "Type",
                                "children": "",
                                "index": "",
                                "root": {
                                  "type": "variable",
                                  "name": "row",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "terminator"
                        }
                      ],
                      [
                        {
                          "type": "expression_list",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "allow_null",
                                "children": "",
                                "index": "",
                                "root": {
                                  "type": "variable",
                                  "name": "field",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            },
                            {
                              "type": "operator",
                              "symbol": "="
                            },
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "Null",
                                "children": "",
                                "index": "",
                                "root": {
                                  "type": "variable",
                                  "name": "row",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "terminator"
                        }
                      ],
                      [
                        {
                          "type": "expression_list",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "default",
                                "children": "",
                                "index": "",
                                "root": {
                                  "type": "variable",
                                  "name": "field",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            },
                            {
                              "type": "operator",
                              "symbol": "="
                            },
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "Default",
                                "children": "",
                                "index": "",
                                "root": {
                                  "type": "variable",
                                  "name": "row",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "terminator"
                        }
                      ],
                      [
                        {
                          "type": "expression_list",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "result",
                                "children": "",
                                "index": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "name",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "field",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  }
                                ]
                              }
                            },
                            {
                              "type": "operator",
                              "symbol": "="
                            },
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "field",
                                "children": "",
                                "index": ""
                              }
                            }
                          ]
                        },
                        {
                          "type": "terminator"
                        }
                      ]
                    ],
                    "variables": {
                      "field": {
                        "type": "variable",
                        "name": "field",
                        "children": "",
                        "index": ""
                      },
                      "name": {
                        "type": "variable",
                        "name": "name",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "field",
                          "children": "",
                          "index": ""
                        }
                      },
                      "Field": {
                        "type": "variable",
                        "name": "Field",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "row",
                          "children": "",
                          "index": ""
                        }
                      },
                      "type": {
                        "type": "variable",
                        "name": "type",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "field",
                          "children": "",
                          "index": ""
                        }
                      },
                      "Type": {
                        "type": "variable",
                        "name": "Type",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "row",
                          "children": "",
                          "index": ""
                        }
                      },
                      "allow_null": {
                        "type": "variable",
                        "name": "allow_null",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "field",
                          "children": "",
                          "index": ""
                        }
                      },
                      "Null": {
                        "type": "variable",
                        "name": "Null",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "row",
                          "children": "",
                          "index": ""
                        }
                      },
                      "default": {
                        "type": "variable",
                        "name": "default",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "field",
                          "children": "",
                          "index": ""
                        }
                      },
                      "Default": {
                        "type": "variable",
                        "name": "Default",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "row",
                          "children": "",
                          "index": ""
                        }
                      },
                      "result": {
                        "type": "variable",
                        "name": "result",
                        "children": "",
                        "index": [
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "name",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "field",
                                "children": "",
                                "index": ""
                              }
                            }
                          }
                        ]
                      }
                    }
                  }
                },
                {
                  "type": "expression_list",
                  "expressions": [
                    "return",
                    {
                      "type": "expression",
                      "contents": {
                        "type": "variable",
                        "name": "result",
                        "children": "",
                        "index": ""
                      }
                    }
                  ]
                }
              ],
              "variables": {
                "rows": {
                  "type": "variable",
                  "name": "rows",
                  "children": "",
                  "index": ""
                },
                "name": {
                  "type": "variable",
                  "name": "name",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "field",
                    "children": "",
                    "index": ""
                  }
                },
                "db": {
                  "type": "variable",
                  "name": "db",
                  "children": "",
                  "index": ""
                },
                "result": {
                  "type": "variable",
                  "name": "result",
                  "children": "",
                  "index": ""
                },
                "row": {
                  "type": "variable",
                  "name": "row",
                  "children": "",
                  "index": ""
                },
                "field": {
                  "type": "variable",
                  "name": "field",
                  "children": "",
                  "index": ""
                },
                "Field": {
                  "type": "variable",
                  "name": "Field",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "row",
                    "children": "",
                    "index": ""
                  }
                },
                "type": {
                  "type": "variable",
                  "name": "type",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "field",
                    "children": "",
                    "index": ""
                  }
                },
                "Type": {
                  "type": "variable",
                  "name": "Type",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "row",
                    "children": "",
                    "index": ""
                  }
                },
                "allow_null": {
                  "type": "variable",
                  "name": "allow_null",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "field",
                    "children": "",
                    "index": ""
                  }
                },
                "Null": {
                  "type": "variable",
                  "name": "Null",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "row",
                    "children": "",
                    "index": ""
                  }
                },
                "default": {
                  "type": "variable",
                  "name": "default",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "field",
                    "children": "",
                    "index": ""
                  }
                },
                "Default": {
                  "type": "variable",
                  "name": "Default",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "row",
                    "children": "",
                    "index": ""
                  }
                }
              }
            },
            "constructor": false
          },
          {
            "type": "method_definition",
            "name": "exists",
            "parameters": {
              "type": "parameters",
              "variables": [
                {
                  "type": "parameter",
                  "name": "db",
                  "default_value": ""
                },
                {
                  "type": "parameter",
                  "name": "name",
                  "default_value": ""
                }
              ]
            },
            "block": {
              "type": "block",
              "elements": [
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "name",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "invoke_function",
                          "name": "preg_replace",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "regex",
                                  "text": "[^\\w]"
                                }
                              },
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "literal_string",
                                  "text": "",
                                  "quotes": "single"
                                }
                              },
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "variable",
                                  "name": "name",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            ]
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "result",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "invoke_function",
                          "name": "query_values",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "literal_string",
                                  "text": "SHOW TABLES LIKE '$name'",
                                  "quotes": "double"
                                }
                              }
                            ]
                          },
                          "root": {
                            "type": "variable",
                            "name": "db",
                            "children": "",
                            "index": ""
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                {
                  "type": "expression_list",
                  "expressions": [
                    "return",
                    {
                      "type": "expression_list",
                      "expressions": [
                        {
                          "type": "expression",
                          "contents": {
                            "type": "invoke_function",
                            "name": "count",
                            "arguments": {
                              "type": "arguments",
                              "expressions": [
                                {
                                  "type": "expression",
                                  "contents": {
                                    "type": "variable",
                                    "name": "result",
                                    "children": "",
                                    "index": ""
                                  }
                                }
                              ]
                            }
                          }
                        },
                        {
                          "type": "operator",
                          "symbol": ">"
                        },
                        {
                          "type": "expression",
                          "contents": "0"
                        }
                      ]
                    }
                  ]
                }
              ],
              "variables": {
                "name": {
                  "type": "variable",
                  "name": "name",
                  "children": "",
                  "index": ""
                },
                "result": {
                  "type": "variable",
                  "name": "result",
                  "children": "",
                  "index": ""
                },
                "db": {
                  "type": "variable",
                  "name": "db",
                  "children": "",
                  "index": ""
                }
              }
            },
            "constructor": false
          },
          {
            "type": "method_definition",
            "name": "load_from_database",
            "parameters": {
              "type": "parameters",
              "variables": [
                ""
              ]
            },
            "block": {
              "type": "block",
              "elements": [
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "properties",
                          "children": "",
                          "index": "",
                          "root": {
                            "type": "variable",
                            "name": "this",
                            "children": "",
                            "index": ""
                          }
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "invoke_static_member",
                          "class_name": "Table",
                          "target": {
                            "type": "invoke_function",
                            "name": "load_fields",
                            "arguments": {
                              "type": "arguments",
                              "expressions": [
                                {
                                  "type": "expression",
                                  "contents": {
                                    "type": "variable",
                                    "name": "db",
                                    "children": "",
                                    "index": "",
                                    "root": {
                                      "type": "variable",
                                      "name": "this",
                                      "children": "",
                                      "index": ""
                                    }
                                  }
                                },
                                {
                                  "type": "expression",
                                  "contents": {
                                    "type": "variable",
                                    "name": "name",
                                    "children": "",
                                    "index": "",
                                    "root": {
                                      "type": "variable",
                                      "name": "this",
                                      "children": "",
                                      "index": ""
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "indexes",
                          "children": "",
                          "index": "",
                          "root": {
                            "type": "variable",
                            "name": "this",
                            "children": "",
                            "index": ""
                          }
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "invoke_function",
                          "name": "load_indexes",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              ""
                            ]
                          },
                          "root": {
                            "type": "variable",
                            "name": "this",
                            "children": "",
                            "index": ""
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ]
              ],
              "variables": {
                "properties": {
                  "type": "variable",
                  "name": "properties",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "this",
                    "children": "",
                    "index": ""
                  }
                },
                "db": {
                  "type": "variable",
                  "name": "db",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "this",
                    "children": "",
                    "index": ""
                  }
                },
                "name": {
                  "type": "variable",
                  "name": "name",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "this",
                    "children": "",
                    "index": ""
                  }
                },
                "indexes": {
                  "type": "variable",
                  "name": "indexes",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "this",
                    "children": "",
                    "index": ""
                  }
                },
                "this": {
                  "type": "variable",
                  "name": "this",
                  "children": "",
                  "index": ""
                }
              }
            },
            "constructor": false
          },
          {
            "type": "method_definition",
            "name": "load_from_schema",
            "parameters": {
              "type": "parameters",
              "variables": [
                {
                  "type": "parameter",
                  "name": "source",
                  "default_value": ""
                }
              ]
            },
            "block": {
              "type": "block",
              "elements": [
                {
                  "type": "comment",
                  "text": " Note: not all tables need a reciprical trellis.",
                  "multiline": 0
                },
                {
                  "type": "control",
                  "name": "if",
                  "condition": [
                    {
                      "type": "expression",
                      "contents": {
                        "type": "invoke_function",
                        "name": "isset",
                        "arguments": {
                          "type": "arguments",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "trellises",
                                "children": "",
                                "index": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "name",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "this",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  }
                                ],
                                "root": {
                                  "type": "variable",
                                  "name": "this",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            }
                          ]
                        }
                      }
                    }
                  ],
                  "block": {
                    "type": "block",
                    "elements": [
                      {
                        "type": "comment",
                        "text": " Create bi-connection.  For now I don't know of any case where",
                        "multiline": 0
                      },
                      {
                        "type": "comment",
                        "text": " tables and trellises would be dynamically modified, so I'm not ",
                        "multiline": 0
                      },
                      {
                        "type": "comment",
                        "text": " using MetaHub connections for this.",
                        "multiline": 0
                      },
                      [
                        {
                          "type": "expression_list",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "trellis",
                                "children": "",
                                "index": "",
                                "root": {
                                  "type": "variable",
                                  "name": "this",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            },
                            {
                              "type": "operator",
                              "symbol": "="
                            },
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "trellises",
                                "children": "",
                                "index": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "name",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "this",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  }
                                ],
                                "root": {
                                  "type": "variable",
                                  "name": "this",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "terminator"
                        }
                      ],
                      [
                        {
                          "type": "expression_list",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "table",
                                "children": "",
                                "index": "",
                                "root": {
                                  "type": "variable",
                                  "name": "this",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            },
                            {
                              "type": "operator",
                              "symbol": "="
                            },
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "this",
                                "children": "",
                                "index": ""
                              }
                            }
                          ]
                        },
                        {
                          "type": "terminator"
                        }
                      ],
                      [
                        {
                          "type": "expression_list",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "name",
                                "children": "",
                                "index": "",
                                "root": {
                                  "type": "variable",
                                  "name": "this",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            },
                            {
                              "type": "operator",
                              "symbol": "="
                            },
                            {
                              "type": "expression",
                              "contents": {
                                "type": "invoke_function",
                                "name": "get_plural",
                                "arguments": {
                                  "type": "arguments",
                                  "expressions": [
                                    ""
                                  ]
                                },
                                "root": {
                                  "type": "variable",
                                  "name": "this",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "terminator"
                        }
                      ]
                    ],
                    "variables": {
                      "trellis": {
                        "type": "variable",
                        "name": "trellis",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "this",
                          "children": "",
                          "index": ""
                        }
                      },
                      "trellises": {
                        "type": "variable",
                        "name": "trellises",
                        "children": "",
                        "index": [
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "name",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "this",
                                "children": "",
                                "index": ""
                              }
                            }
                          }
                        ],
                        "root": {
                          "type": "variable",
                          "name": "this",
                          "children": "",
                          "index": ""
                        }
                      },
                      "table": {
                        "type": "variable",
                        "name": "table",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "this",
                          "children": "",
                          "index": ""
                        }
                      },
                      "this": {
                        "type": "variable",
                        "name": "this",
                        "children": "",
                        "index": ""
                      },
                      "name": {
                        "type": "variable",
                        "name": "name",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "this",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  }
                },
                [
                  {
                    "type": "expression",
                    "contents": {
                      "type": "invoke_static_member",
                      "class_name": "MetaHub",
                      "target": {
                        "type": "invoke_function",
                        "name": "extend",
                        "arguments": {
                          "type": "arguments",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "this",
                                "children": "",
                                "index": ""
                              }
                            },
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "source",
                                "children": "",
                                "index": ""
                              }
                            }
                          ]
                        }
                      }
                    }
                  },
                  {
                    "type": "terminator"
                  }
                ],
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "properties",
                          "children": "",
                          "index": "",
                          "root": {
                            "type": "variable",
                            "name": "this",
                            "children": "",
                            "index": ""
                          }
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "conversion",
                          "out_type": "array",
                          "expression": {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "properties",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "this",
                                "children": "",
                                "index": ""
                              }
                            }
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                {
                  "type": "comment",
                  "text": "    if (isset($source->name)) {",
                  "multiline": 0
                },
                {
                  "type": "comment",
                  "text": "      $this->name = $source->name;",
                  "multiline": 0
                },
                {
                  "type": "comment",
                  "text": "    }",
                  "multiline": 0
                }
              ],
              "variables": {
                "trellises": {
                  "type": "variable",
                  "name": "trellises",
                  "children": "",
                  "index": [
                    {
                      "type": "expression",
                      "contents": {
                        "type": "variable",
                        "name": "name",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "this",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  ],
                  "root": {
                    "type": "variable",
                    "name": "this",
                    "children": "",
                    "index": ""
                  }
                },
                "trellis": {
                  "type": "variable",
                  "name": "trellis",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "this",
                    "children": "",
                    "index": ""
                  }
                },
                "table": {
                  "type": "variable",
                  "name": "table",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "this",
                    "children": "",
                    "index": ""
                  }
                },
                "this": {
                  "type": "variable",
                  "name": "this",
                  "children": "",
                  "index": ""
                },
                "name": {
                  "type": "variable",
                  "name": "name",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "this",
                    "children": "",
                    "index": ""
                  }
                },
                "source": {
                  "type": "variable",
                  "name": "source",
                  "children": "",
                  "index": ""
                },
                "properties": {
                  "type": "variable",
                  "name": "properties",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "this",
                    "children": "",
                    "index": ""
                  }
                }
              }
            },
            "constructor": false
          },
          {
            "type": "method_definition",
            "name": "load_indexes",
            "parameters": {
              "type": "parameters",
              "variables": [
                ""
              ]
            },
            "block": {
              "type": "block",
              "elements": [
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "rows",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "invoke_function",
                          "name": "query_objects",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              {
                                "type": "expression_list",
                                "expressions": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "literal_string",
                                      "text": "SHOW INDEX FROM ",
                                      "quotes": "single"
                                    }
                                  },
                                  {
                                    "type": "operator",
                                    "symbol": "+"
                                  },
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "name",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "this",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  }
                                ]
                              }
                            ]
                          },
                          "root": {
                            "type": "variable",
                            "name": "this",
                            "children": "",
                            "index": ""
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "result",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "create_array",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              ""
                            ]
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                {
                  "type": "foreach_object",
                  "object": {
                    "type": "variable",
                    "name": "rows",
                    "children": "",
                    "index": ""
                  },
                  "key": "",
                  "value": {
                    "type": "variable",
                    "name": "row",
                    "children": "",
                    "index": ""
                  },
                  "block": {
                    "type": "block",
                    "elements": [
                      [
                        {
                          "type": "expression_list",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "name",
                                "children": "",
                                "index": ""
                              }
                            },
                            {
                              "type": "operator",
                              "symbol": "="
                            },
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "Key_name",
                                "children": "",
                                "index": "",
                                "root": {
                                  "type": "variable",
                                  "name": "index",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "terminator"
                        }
                      ],
                      {
                        "type": "comment",
                        "text": " Multiple rows from this query can be part of the same query, so combine them if they are.",
                        "multiline": 0
                      },
                      {
                        "type": "control",
                        "name": "if",
                        "condition": [
                          {
                            "type": "expression",
                            "contents": {
                              "type": "invoke_function",
                              "name": "isset",
                              "arguments": {
                                "type": "arguments",
                                "expressions": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "result",
                                      "children": "",
                                      "index": [
                                        {
                                          "type": "expression",
                                          "contents": {
                                            "type": "variable",
                                            "name": "name",
                                            "children": "",
                                            "index": ""
                                          }
                                        }
                                      ]
                                    }
                                  }
                                ]
                              }
                            }
                          }
                        ],
                        "block": {
                          "type": "block",
                          "elements": [
                            [
                              {
                                "type": "expression_list",
                                "expressions": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "index",
                                      "children": "",
                                      "index": ""
                                    }
                                  },
                                  {
                                    "type": "operator",
                                    "symbol": "="
                                  },
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "instantiate_class",
                                      "name": "stdClass",
                                      "arguments": {
                                        "type": "arguments",
                                        "expressions": [
                                          ""
                                        ]
                                      }
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "terminator"
                              }
                            ],
                            [
                              {
                                "type": "expression_list",
                                "expressions": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "result",
                                      "children": "",
                                      "index": [
                                        {
                                          "type": "expression",
                                          "contents": {
                                            "type": "variable",
                                            "name": "name",
                                            "children": "",
                                            "index": ""
                                          }
                                        }
                                      ]
                                    }
                                  },
                                  {
                                    "type": "operator",
                                    "symbol": "="
                                  },
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "index",
                                      "children": "",
                                      "index": ""
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "terminator"
                              }
                            ],
                            [
                              {
                                "type": "expression_list",
                                "expressions": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "name",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "index",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  },
                                  {
                                    "type": "operator",
                                    "symbol": "="
                                  },
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "name",
                                      "children": "",
                                      "index": ""
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "terminator"
                              }
                            ],
                            [
                              {
                                "type": "expression_list",
                                "expressions": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "fields",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "index",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  },
                                  {
                                    "type": "operator",
                                    "symbol": "="
                                  },
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "create_array",
                                      "arguments": {
                                        "type": "arguments",
                                        "expressions": [
                                          ""
                                        ]
                                      }
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "terminator"
                              }
                            ],
                            [
                              {
                                "type": "expression_list",
                                "expressions": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "unique",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "index",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  },
                                  {
                                    "type": "operator",
                                    "symbol": "="
                                  },
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "Non_unique",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "row",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "terminator"
                              }
                            ],
                            [
                              {
                                "type": "expression_list",
                                "expressions": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "comment",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "index",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  },
                                  {
                                    "type": "operator",
                                    "symbol": "="
                                  },
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "Comment",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "row",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "terminator"
                              }
                            ],
                            [
                              {
                                "type": "expression_list",
                                "expressions": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "index_comment",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "index",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  },
                                  {
                                    "type": "operator",
                                    "symbol": "="
                                  },
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "Index_comment",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "row",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "terminator"
                              }
                            ],
                            [
                              {
                                "type": "expression_list",
                                "expressions": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "collation",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "index",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  },
                                  {
                                    "type": "operator",
                                    "symbol": "="
                                  },
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "Collation",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "row",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "terminator"
                              }
                            ],
                            [
                              {
                                "type": "expression_list",
                                "expressions": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "cardinality",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "index",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  },
                                  {
                                    "type": "operator",
                                    "symbol": "="
                                  },
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "Cardinality",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "row",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "terminator"
                              }
                            ],
                            [
                              {
                                "type": "expression_list",
                                "expressions": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "index_type",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "index",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  },
                                  {
                                    "type": "operator",
                                    "symbol": "="
                                  },
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "Index_Type",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "row",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "terminator"
                              }
                            ]
                          ],
                          "variables": {
                            "index": {
                              "type": "variable",
                              "name": "index",
                              "children": "",
                              "index": ""
                            },
                            "result": {
                              "type": "variable",
                              "name": "result",
                              "children": "",
                              "index": [
                                {
                                  "type": "expression",
                                  "contents": {
                                    "type": "variable",
                                    "name": "name",
                                    "children": "",
                                    "index": ""
                                  }
                                }
                              ]
                            },
                            "name": {
                              "type": "variable",
                              "name": "name",
                              "children": "",
                              "index": ""
                            },
                            "fields": {
                              "type": "variable",
                              "name": "fields",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "index",
                                "children": "",
                                "index": ""
                              }
                            },
                            "unique": {
                              "type": "variable",
                              "name": "unique",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "index",
                                "children": "",
                                "index": ""
                              }
                            },
                            "Non_unique": {
                              "type": "variable",
                              "name": "Non_unique",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "row",
                                "children": "",
                                "index": ""
                              }
                            },
                            "comment": {
                              "type": "variable",
                              "name": "comment",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "index",
                                "children": "",
                                "index": ""
                              }
                            },
                            "Comment": {
                              "type": "variable",
                              "name": "Comment",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "row",
                                "children": "",
                                "index": ""
                              }
                            },
                            "index_comment": {
                              "type": "variable",
                              "name": "index_comment",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "index",
                                "children": "",
                                "index": ""
                              }
                            },
                            "Index_comment": {
                              "type": "variable",
                              "name": "Index_comment",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "row",
                                "children": "",
                                "index": ""
                              }
                            },
                            "collation": {
                              "type": "variable",
                              "name": "collation",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "index",
                                "children": "",
                                "index": ""
                              }
                            },
                            "Collation": {
                              "type": "variable",
                              "name": "Collation",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "row",
                                "children": "",
                                "index": ""
                              }
                            },
                            "cardinality": {
                              "type": "variable",
                              "name": "cardinality",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "index",
                                "children": "",
                                "index": ""
                              }
                            },
                            "Cardinality": {
                              "type": "variable",
                              "name": "Cardinality",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "row",
                                "children": "",
                                "index": ""
                              }
                            },
                            "index_type": {
                              "type": "variable",
                              "name": "index_type",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "index",
                                "children": "",
                                "index": ""
                              }
                            },
                            "Index_Type": {
                              "type": "variable",
                              "name": "Index_Type",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "row",
                                "children": "",
                                "index": ""
                              }
                            }
                          }
                        }
                      },
                      {
                        "type": "control",
                        "name": "else",
                        "condition": null,
                        "block": {
                          "type": "block",
                          "elements": [
                            [
                              {
                                "type": "expression_list",
                                "expressions": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "index",
                                      "children": "",
                                      "index": ""
                                    }
                                  },
                                  {
                                    "type": "operator",
                                    "symbol": "="
                                  },
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "result",
                                      "children": "",
                                      "index": [
                                        {
                                          "type": "expression",
                                          "contents": {
                                            "type": "variable",
                                            "name": "name",
                                            "children": "",
                                            "index": ""
                                          }
                                        }
                                      ]
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "terminator"
                              }
                            ]
                          ],
                          "variables": {
                            "index": {
                              "type": "variable",
                              "name": "index",
                              "children": "",
                              "index": ""
                            },
                            "result": {
                              "type": "variable",
                              "name": "result",
                              "children": "",
                              "index": [
                                {
                                  "type": "expression",
                                  "contents": {
                                    "type": "variable",
                                    "name": "name",
                                    "children": "",
                                    "index": ""
                                  }
                                }
                              ]
                            }
                          }
                        }
                      },
                      [
                        {
                          "type": "expression",
                          "contents": {
                            "type": "variable",
                            "name": "fields",
                            "children": "",
                            "index": null,
                            "append": {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "Column_name",
                                "children": "",
                                "index": "",
                                "root": {
                                  "type": "variable",
                                  "name": "row",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            },
                            "root": {
                              "type": "variable",
                              "name": "index",
                              "children": "",
                              "index": ""
                            }
                          }
                        },
                        {
                          "type": "terminator"
                        }
                      ]
                    ],
                    "variables": {
                      "name": {
                        "type": "variable",
                        "name": "name",
                        "children": "",
                        "index": ""
                      },
                      "Key_name": {
                        "type": "variable",
                        "name": "Key_name",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "index",
                          "children": "",
                          "index": ""
                        }
                      },
                      "result": {
                        "type": "variable",
                        "name": "result",
                        "children": "",
                        "index": [
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "name",
                              "children": "",
                              "index": ""
                            }
                          }
                        ]
                      },
                      "index": {
                        "type": "variable",
                        "name": "index",
                        "children": "",
                        "index": ""
                      },
                      "fields": {
                        "type": "variable",
                        "name": "fields",
                        "children": "",
                        "index": null,
                        "append": {
                          "type": "expression",
                          "contents": {
                            "type": "variable",
                            "name": "Column_name",
                            "children": "",
                            "index": "",
                            "root": {
                              "type": "variable",
                              "name": "row",
                              "children": "",
                              "index": ""
                            }
                          }
                        },
                        "root": {
                          "type": "variable",
                          "name": "index",
                          "children": "",
                          "index": ""
                        }
                      },
                      "unique": {
                        "type": "variable",
                        "name": "unique",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "index",
                          "children": "",
                          "index": ""
                        }
                      },
                      "Non_unique": {
                        "type": "variable",
                        "name": "Non_unique",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "row",
                          "children": "",
                          "index": ""
                        }
                      },
                      "comment": {
                        "type": "variable",
                        "name": "comment",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "index",
                          "children": "",
                          "index": ""
                        }
                      },
                      "Comment": {
                        "type": "variable",
                        "name": "Comment",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "row",
                          "children": "",
                          "index": ""
                        }
                      },
                      "index_comment": {
                        "type": "variable",
                        "name": "index_comment",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "index",
                          "children": "",
                          "index": ""
                        }
                      },
                      "Index_comment": {
                        "type": "variable",
                        "name": "Index_comment",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "row",
                          "children": "",
                          "index": ""
                        }
                      },
                      "collation": {
                        "type": "variable",
                        "name": "collation",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "index",
                          "children": "",
                          "index": ""
                        }
                      },
                      "Collation": {
                        "type": "variable",
                        "name": "Collation",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "row",
                          "children": "",
                          "index": ""
                        }
                      },
                      "cardinality": {
                        "type": "variable",
                        "name": "cardinality",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "index",
                          "children": "",
                          "index": ""
                        }
                      },
                      "Cardinality": {
                        "type": "variable",
                        "name": "Cardinality",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "row",
                          "children": "",
                          "index": ""
                        }
                      },
                      "index_type": {
                        "type": "variable",
                        "name": "index_type",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "index",
                          "children": "",
                          "index": ""
                        }
                      },
                      "Index_Type": {
                        "type": "variable",
                        "name": "Index_Type",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "row",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  }
                },
                {
                  "type": "expression_list",
                  "expressions": [
                    "return",
                    {
                      "type": "expression",
                      "contents": {
                        "type": "variable",
                        "name": "result",
                        "children": "",
                        "index": ""
                      }
                    }
                  ]
                }
              ],
              "variables": {
                "rows": {
                  "type": "variable",
                  "name": "rows",
                  "children": "",
                  "index": ""
                },
                "name": {
                  "type": "variable",
                  "name": "name",
                  "children": "",
                  "index": ""
                },
                "this": {
                  "type": "variable",
                  "name": "this",
                  "children": "",
                  "index": ""
                },
                "result": {
                  "type": "variable",
                  "name": "result",
                  "children": "",
                  "index": ""
                },
                "row": {
                  "type": "variable",
                  "name": "row",
                  "children": "",
                  "index": ""
                },
                "Key_name": {
                  "type": "variable",
                  "name": "Key_name",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "index",
                    "children": "",
                    "index": ""
                  }
                },
                "index": {
                  "type": "variable",
                  "name": "index",
                  "children": "",
                  "index": ""
                },
                "fields": {
                  "type": "variable",
                  "name": "fields",
                  "children": "",
                  "index": null,
                  "append": {
                    "type": "expression",
                    "contents": {
                      "type": "variable",
                      "name": "Column_name",
                      "children": "",
                      "index": "",
                      "root": {
                        "type": "variable",
                        "name": "row",
                        "children": "",
                        "index": ""
                      }
                    }
                  },
                  "root": {
                    "type": "variable",
                    "name": "index",
                    "children": "",
                    "index": ""
                  }
                },
                "unique": {
                  "type": "variable",
                  "name": "unique",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "index",
                    "children": "",
                    "index": ""
                  }
                },
                "Non_unique": {
                  "type": "variable",
                  "name": "Non_unique",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "row",
                    "children": "",
                    "index": ""
                  }
                },
                "comment": {
                  "type": "variable",
                  "name": "comment",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "index",
                    "children": "",
                    "index": ""
                  }
                },
                "Comment": {
                  "type": "variable",
                  "name": "Comment",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "row",
                    "children": "",
                    "index": ""
                  }
                },
                "index_comment": {
                  "type": "variable",
                  "name": "index_comment",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "index",
                    "children": "",
                    "index": ""
                  }
                },
                "Index_comment": {
                  "type": "variable",
                  "name": "Index_comment",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "row",
                    "children": "",
                    "index": ""
                  }
                },
                "collation": {
                  "type": "variable",
                  "name": "collation",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "index",
                    "children": "",
                    "index": ""
                  }
                },
                "Collation": {
                  "type": "variable",
                  "name": "Collation",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "row",
                    "children": "",
                    "index": ""
                  }
                },
                "cardinality": {
                  "type": "variable",
                  "name": "cardinality",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "index",
                    "children": "",
                    "index": ""
                  }
                },
                "Cardinality": {
                  "type": "variable",
                  "name": "Cardinality",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "row",
                    "children": "",
                    "index": ""
                  }
                },
                "index_type": {
                  "type": "variable",
                  "name": "index_type",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "index",
                    "children": "",
                    "index": ""
                  }
                },
                "Index_Type": {
                  "type": "variable",
                  "name": "Index_Type",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "row",
                    "children": "",
                    "index": ""
                  }
                }
              }
            },
            "constructor": false
          },
          {
            "type": "method_definition",
            "name": "get_data",
            "parameters": {
              "type": "parameters",
              "variables": [
                ""
              ]
            },
            "block": {
              "type": "block",
              "elements": [
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "result",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "instantiate_class",
                          "name": "stdClass",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              ""
                            ]
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                {
                  "type": "control",
                  "name": "if",
                  "condition": [
                    {
                      "type": "expression",
                      "contents": {
                        "type": "variable",
                        "name": "name",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "this",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  ],
                  "block": {
                    "type": "block",
                    "elements": [
                      {
                        "type": "expression_list",
                        "expressions": [
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "name",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "result",
                                "children": "",
                                "index": ""
                              }
                            }
                          },
                          {
                            "type": "operator",
                            "symbol": "="
                          },
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "name",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "this",
                                "children": "",
                                "index": ""
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "terminator"
                      }
                    ],
                    "variables": {
                      "name": {
                        "type": "variable",
                        "name": "name",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "this",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  }
                },
                {
                  "type": "control",
                  "name": "if",
                  "condition": [
                    {
                      "type": "expression",
                      "contents": {
                        "type": "variable",
                        "name": "primary_keys",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "this",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  ],
                  "block": {
                    "type": "block",
                    "elements": [
                      {
                        "type": "expression_list",
                        "expressions": [
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "primary_keys",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "result",
                                "children": "",
                                "index": ""
                              }
                            }
                          },
                          {
                            "type": "operator",
                            "symbol": "="
                          },
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "primary_keys",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "this",
                                "children": "",
                                "index": ""
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "terminator"
                      }
                    ],
                    "variables": {
                      "primary_keys": {
                        "type": "variable",
                        "name": "primary_keys",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "this",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  }
                },
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "fields",
                          "children": "",
                          "index": "",
                          "root": {
                            "type": "variable",
                            "name": "result",
                            "children": "",
                            "index": ""
                          }
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "properties",
                          "children": "",
                          "index": "",
                          "root": {
                            "type": "variable",
                            "name": "this",
                            "children": "",
                            "index": ""
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                {
                  "type": "expression_list",
                  "expressions": [
                    "return",
                    {
                      "type": "expression",
                      "contents": {
                        "type": "variable",
                        "name": "result",
                        "children": "",
                        "index": ""
                      }
                    }
                  ]
                }
              ],
              "variables": {
                "result": {
                  "type": "variable",
                  "name": "result",
                  "children": "",
                  "index": ""
                },
                "name": {
                  "type": "variable",
                  "name": "name",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "this",
                    "children": "",
                    "index": ""
                  }
                },
                "primary_keys": {
                  "type": "variable",
                  "name": "primary_keys",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "this",
                    "children": "",
                    "index": ""
                  }
                },
                "fields": {
                  "type": "variable",
                  "name": "fields",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "result",
                    "children": "",
                    "index": ""
                  }
                },
                "properties": {
                  "type": "variable",
                  "name": "properties",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "this",
                    "children": "",
                    "index": ""
                  }
                }
              }
            },
            "constructor": false
          },
          {
            "type": "method_definition",
            "name": "get_vineyard_layer",
            "parameters": {
              "type": "parameters",
              "variables": [
                ""
              ]
            },
            "block": {
              "type": "block",
              "elements": [
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "layer",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "instantiate_class",
                          "name": "stdClass",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              ""
                            ]
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "properties",
                          "children": "",
                          "index": "",
                          "root": {
                            "type": "variable",
                            "name": "layer",
                            "children": "",
                            "index": ""
                          }
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "create_array",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              ""
                            ]
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                {
                  "type": "foreach_object",
                  "object": {
                    "type": "variable",
                    "name": "properties",
                    "children": "",
                    "index": "",
                    "root": {
                      "type": "variable",
                      "name": "this",
                      "children": "",
                      "index": ""
                    }
                  },
                  "key": "",
                  "value": {
                    "type": "variable",
                    "name": "item",
                    "children": "",
                    "index": ""
                  },
                  "block": {
                    "type": "block",
                    "elements": [
                      [
                        {
                          "type": "expression_list",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "property",
                                "children": "",
                                "index": ""
                              }
                            },
                            {
                              "type": "operator",
                              "symbol": "="
                            },
                            {
                              "type": "expression",
                              "contents": {
                                "type": "instantiate_class",
                                "name": "stdClass",
                                "arguments": {
                                  "type": "arguments",
                                  "expressions": [
                                    ""
                                  ]
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "terminator"
                        }
                      ],
                      [
                        {
                          "type": "expression_list",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "type",
                                "children": "",
                                "index": "",
                                "root": {
                                  "type": "variable",
                                  "name": "property",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            },
                            {
                              "type": "operator",
                              "symbol": "="
                            },
                            {
                              "type": "expression",
                              "contents": {
                                "type": "invoke_static_member",
                                "class_name": "Table",
                                "target": {
                                  "type": "invoke_function",
                                  "name": "convert_to_property_type",
                                  "arguments": {
                                    "type": "arguments",
                                    "expressions": [
                                      {
                                        "type": "expression",
                                        "contents": {
                                          "type": "variable",
                                          "name": "type",
                                          "children": "",
                                          "index": "",
                                          "root": {
                                            "type": "variable",
                                            "name": "item",
                                            "children": "",
                                            "index": ""
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "terminator"
                        }
                      ],
                      [
                        {
                          "type": "expression_list",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "properties",
                                "children": "",
                                "index": [
                                  {
                                    "type": "expression",
                                    "contents": {
                                      "type": "variable",
                                      "name": "name",
                                      "children": "",
                                      "index": "",
                                      "root": {
                                        "type": "variable",
                                        "name": "item",
                                        "children": "",
                                        "index": ""
                                      }
                                    }
                                  }
                                ],
                                "root": {
                                  "type": "variable",
                                  "name": "layer",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            },
                            {
                              "type": "operator",
                              "symbol": "="
                            },
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "property",
                                "children": "",
                                "index": ""
                              }
                            }
                          ]
                        },
                        {
                          "type": "terminator"
                        }
                      ]
                    ],
                    "variables": {
                      "property": {
                        "type": "variable",
                        "name": "property",
                        "children": "",
                        "index": ""
                      },
                      "type": {
                        "type": "variable",
                        "name": "type",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "item",
                          "children": "",
                          "index": ""
                        }
                      },
                      "properties": {
                        "type": "variable",
                        "name": "properties",
                        "children": "",
                        "index": [
                          {
                            "type": "expression",
                            "contents": {
                              "type": "variable",
                              "name": "name",
                              "children": "",
                              "index": "",
                              "root": {
                                "type": "variable",
                                "name": "item",
                                "children": "",
                                "index": ""
                              }
                            }
                          }
                        ],
                        "root": {
                          "type": "variable",
                          "name": "layer",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  }
                },
                {
                  "type": "expression_list",
                  "expressions": [
                    "return",
                    {
                      "type": "expression",
                      "contents": {
                        "type": "variable",
                        "name": "layer",
                        "children": "",
                        "index": ""
                      }
                    }
                  ]
                }
              ],
              "variables": {
                "layer": {
                  "type": "variable",
                  "name": "layer",
                  "children": "",
                  "index": ""
                },
                "properties": {
                  "type": "variable",
                  "name": "properties",
                  "children": "",
                  "index": [
                    {
                      "type": "expression",
                      "contents": {
                        "type": "variable",
                        "name": "name",
                        "children": "",
                        "index": "",
                        "root": {
                          "type": "variable",
                          "name": "item",
                          "children": "",
                          "index": ""
                        }
                      }
                    }
                  ],
                  "root": {
                    "type": "variable",
                    "name": "layer",
                    "children": "",
                    "index": ""
                  }
                },
                "item": {
                  "type": "variable",
                  "name": "item",
                  "children": "",
                  "index": ""
                },
                "property": {
                  "type": "variable",
                  "name": "property",
                  "children": "",
                  "index": ""
                },
                "type": {
                  "type": "variable",
                  "name": "type",
                  "children": "",
                  "index": "",
                  "root": {
                    "type": "variable",
                    "name": "item",
                    "children": "",
                    "index": ""
                  }
                }
              }
            },
            "constructor": false
          },
          {
            "type": "method_definition",
            "name": "get_ground_layer",
            "parameters": {
              "type": "parameters",
              "variables": [
                ""
              ]
            },
            "block": {
              "type": "block",
              "elements": [],
              "variables": {}
            },
            "constructor": false
          },
          {
            "type": "comment",
            "text": " Example:\n    Table::get_vineyard_json('dbname', 'table_name');\n   ",
            "multiline": 1
          },
          {
            "type": "method_definition",
            "name": "get_vineyard_json",
            "parameters": {
              "type": "parameters",
              "variables": [
                {
                  "type": "parameter",
                  "name": "database_name",
                  "default_value": ""
                },
                {
                  "type": "parameter",
                  "name": "table_name",
                  "default_value": ""
                }
              ]
            },
            "block": {
              "type": "block",
              "elements": [
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "ground",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "instantiate_class",
                          "name": "Ground",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "variable",
                                  "name": "database_name",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            ]
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "table",
                          "children": "",
                          "index": ""
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "instantiate_class",
                          "name": "Table",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "variable",
                                  "name": "table_name",
                                  "children": "",
                                  "index": ""
                                }
                              },
                              {
                                "type": "expression",
                                "contents": {
                                  "type": "variable",
                                  "name": "ground",
                                  "children": "",
                                  "index": ""
                                }
                              }
                            ]
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                [
                  {
                    "type": "expression",
                    "contents": {
                      "type": "invoke_function",
                      "name": "load_from_database",
                      "arguments": {
                        "type": "arguments",
                        "expressions": [
                          ""
                        ]
                      },
                      "root": {
                        "type": "variable",
                        "name": "table",
                        "children": "",
                        "index": ""
                      }
                    }
                  },
                  {
                    "type": "terminator"
                  }
                ],
                [
                  {
                    "type": "expression_list",
                    "expressions": [
                      {
                        "type": "expression",
                        "contents": {
                          "type": "variable",
                          "name": "data",
                          "children": "",
                          "index": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "table_name",
                                "children": "",
                                "index": ""
                              }
                            }
                          ]
                        }
                      },
                      {
                        "type": "operator",
                        "symbol": "="
                      },
                      {
                        "type": "expression",
                        "contents": {
                          "type": "invoke_function",
                          "name": "get_vineyard_layer",
                          "arguments": {
                            "type": "arguments",
                            "expressions": [
                              ""
                            ]
                          },
                          "root": {
                            "type": "variable",
                            "name": "table",
                            "children": "",
                            "index": ""
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "terminator"
                  }
                ],
                {
                  "type": "expression_list",
                  "expressions": [
                    "return",
                    {
                      "type": "expression",
                      "contents": {
                        "type": "invoke_function",
                        "name": "json_encode",
                        "arguments": {
                          "type": "arguments",
                          "expressions": [
                            {
                              "type": "expression",
                              "contents": {
                                "type": "variable",
                                "name": "data",
                                "children": "",
                                "index": ""
                              }
                            }
                          ]
                        }
                      }
                    }
                  ]
                }
              ],
              "variables": {
                "ground": {
                  "type": "variable",
                  "name": "ground",
                  "children": "",
                  "index": ""
                },
                "database_name": {
                  "type": "variable",
                  "name": "database_name",
                  "children": "",
                  "index": ""
                },
                "table": {
                  "type": "variable",
                  "name": "table",
                  "children": "",
                  "index": ""
                },
                "table_name": {
                  "type": "variable",
                  "name": "table_name",
                  "children": "",
                  "index": ""
                },
                "data": {
                  "type": "variable",
                  "name": "data",
                  "children": "",
                  "index": ""
                }
              }
            },
            "constructor": false
          }
        ]
      }
    }
  ]
}